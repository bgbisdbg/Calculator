http://185.84.163.123:8000/

<h1>Калькулятор</h1>

<h2>Задание</h2>

**Требования к приложению**

1. Веб-приложение реализует калькулятор.
2. Пользователю выводится сообщение с предложением ввести строку с произвольным 
математическом выражением.
3. Пользователь подтверждает факт того, что он ввел строку, нажатием кнопки.
4. Приложение делает валидацию введенного математического выражения на корректность.
5. На стороне сервера приложение разбирает строку и производит вычисление, сохраняя результат.
6. Пользователю выводится результат для введенной строки.
7. Пользователю предлагается заново ввести строку, процесс повторяется бесконечно.
8. На странице должна отображаться следующая информация:
a. История введенных строк и полученных результатов

**Требования к реализации, технологиям и инструментам**
1. На серверной стороне все данные хранить в сессии.
2. У каждого пользователя должна быть своя сессия.
3. Все пользователи работают анонимно.
4. Выполнить в соответствии с принципами объектно-ориентированного программирования.
5. При реализации требований пункта №5 не допускается использование готовых сторонних 
библиотек.


<h1>Реализация</h1>

Для выполнения этого задания мы используем фреймворк Django без сторонних библиотек так как фреймворк включает в себя всё необходимое. 

**Первый шаг**

1. Создаём проект командой ```django-admin startproject server```

2. Создаём приложение ```python manage.py startapp calculator```

3. Добавляем в settings.py наше приложение 

```
INSTALLED_APPS = [
    '...',
    'calculator',
]
```

**Второй шаг***

1. В файле server/calculator/views.py пишем логику для калькулятора, так как в задании указано, что пользователь вводит строку, мы используем внутренний метод python eval (позволяет выполнять математические расчёты, которые были получены в виде строки.)

**Третий шаг**

1. Создаём HTML страницу

2. Реализуем  POST запрос ``` <form method="post" action="{% url 'calculate' %}"> ```


3. И итерацию для вывода истории

```
  {% for item in history %}
      <p>{{ item.0 }} = {{ item.1 }}</p>
  {% endfor %}
```

**Четвёртый шаг**

Меняем подключение базы данных на postgresql

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'postgres',
        'USER': 'postgres',
        'PASSWORD': 'postgres',
        'HOST': 'db',  # Название контейнера
        'PORT': '5432',
    }
}
```

**Пятый шаг**

1. Подготавливаем Dockerfile и docker-compose.yml

2. Обязательно указать в Dockerfile выполнение миграции при подключении к бд
   
```
CMD ["sh", "-c", "sleep 10 && python manage.py makemigrations && python manage.py migrate && python manage.py runserver 0.0.0.0:8000"]
```

<h1>Запуск программы</h1>

1. Запускаем Docker

2. Выполняем команду ``` docker-compose build ``` - для сборки образов

3. Как только образ будет собран ```docker-compose up ``` для запуска контейнеров


